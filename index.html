<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Schedule Manager</title>
    <style>
        /* --- üé® CSS Styling (Mimics Streamlit Layout) --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f2f6; /* Light gray background */
        }
        .container {
            max-width: 1400px; /* Wide layout */
            margin: 0 auto;
        }
        .header {
            color: #262730;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }
        .main-content {
            display: flex;
            gap: 40px;
            margin-top: 20px;
        }
        .column-left {
            flex: 1; /* Ratio 1 */
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            max-height: fit-content;
        }
        .column-right {
            flex: 2; /* Ratio 2 */
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* --- Form Elements --- */
        input[type="text"], input[type="time"], select {
            width: 100%;
            padding: 10px;
            margin: 8px 0 16px 0;
            display: inline-block;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        label {
            font-weight: 600;
            font-size: 14px;
        }

        /* --- Buttons --- */
        .btn {
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.2s;
            margin-top: 10px;
        }
        .btn-primary {
            background-color: #f63366; /* Streamlit primary color */
            color: white;
        }
        .btn-primary:hover {
            background-color: #e5295c;
        }
        .btn-delete {
            padding: 4px 10px;
            font-size: 12px;
            border-radius: 9999px; /* Pill shape */
            background-color: #ef4444; /* red-500 */
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.15s;
        }
        .btn-delete:hover {
            background-color: #dc2626; /* red-700 */
        }
        
        /* --- Day Filter Buttons --- */
        .day-filter-container {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        .btn-day {
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            background-color: #f0f2f6;
            color: #333;
            cursor: pointer;
        }
        .btn-day.active {
            background-color: #f63366;
            color: white;
            border-color: #f63366;
        }

        /* --- Schedule Table --- */
        .schedule-grid {
            display: grid;
            grid-template-columns: 2fr 1.5fr 1fr 1.5fr 0.8fr; /* Mimics col_widths */
            padding: 10px 0;
            align-items: center;
            border-bottom: 1px solid #eee;
        }
        .schedule-grid-header {
            font-weight: bold;
            color: #262730;
            border-bottom: 2px solid #e0e0e0;
        }
        .schedule-grid > div {
            padding: 8px 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .schedule-empty {
            padding: 20px;
            text-align: center;
            background-color: #e0f7fa;
            border: 1px solid #00bcd4;
            border-radius: 4px;
            color: #00838f;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="header">üóìÔ∏è School Schedule Manager</h1>
        <p style="font-size: 14px; color: grey; margin-top: -10px;">Session ID (Simulated User ID): <span id="user-id"></span></p>

        <div class="main-content">
            <div class="column-left">
                <h2>Add New Class/Period</h2>
                <form id="schedule-form">
                    
                    <label for="subject">Class/Subject Name</label>
                    <input type="text" id="subject" placeholder="e.g., Advanced Calculus, World History" required>

                    <label for="teacher">Teacher Name</label>
                    <input type="text" id="teacher" placeholder="e.g., Ms. Davis, Mr. Smith" required>

                    <div style="display: flex; gap: 10px;">
                        <div style="flex: 1;">
                            <label for="day">Day of the Week</label>
                            <select id="day" required>
                                </select>
                        </div>
                        <div style="flex: 1;">
                            <label for="time">Time</label>
                            <input type="time" id="time" value="09:00" required>
                        </div>
                    </div>

                    <label for="location">Room/Location</label>
                    <input type="text" id="location" placeholder="e.g., Room 301, Library Annex" required>

                    <button type="submit" class="btn btn-primary">‚ûï Add Class to Schedule</button>
                    <div id="form-message" style="margin-top: 10px; color: red;"></div>
                </form>
            </div>

            <div class="column-right">
                <h2>Current Schedule</h2>
                <h3 id="current-day-subheader"></h3>

                <div class="day-filter-container" id="day-filter-buttons">
                    </div>

                <div class="schedule-grid schedule-grid-header">
                    <div>Subject</div>
                    <div>Teacher</div>
                    <div>Time</div>
                    <div>Location</div>
                    <div>Actions</div>
                </div>
                <div id="schedule-table-body">
                    </div>
                
            </div>
        </div>
    </div>

    <script>
        // --- ‚òï JavaScript Logic (Simulates Python Session State and Logic) ---

        // Constants
        const DAYS_OF_WEEK = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];

        // State (Mimics st.session_state)
        let schedule = [];
        let selectedDay = DAYS_OF_WEEK[new Date().getDay() === 0 ? 6 : new Date().getDay() - 1]; // Default to current day
        const userId = crypto.randomUUID();

        // --- DOM Elements ---
        const userIdSpan = document.getElementById('user-id');
        const daySelect = document.getElementById('day');
        const scheduleForm = document.getElementById('schedule-form');
        const formMessage = document.getElementById('form-message');
        const dayFilterContainer = document.getElementById('day-filter-buttons');
        const scheduleTableBody = document.getElementById('schedule-table-body');
        const currentDaySubheader = document.getElementById('current-day-subheader');

        // --- Initialization ---

        function initializeUI() {
            userIdSpan.textContent = userId;
            populateDaySelect();
            renderDayFilters();
            renderSchedule();
        }

        // Populates the Day of the Week dropdown in the form
        function populateDaySelect() {
            DAYS_OF_WEEK.forEach(day => {
                const option = document.createElement('option');
                option.value = day;
                option.textContent = day;
                daySelect.appendChild(option);
            });
            // Set default time to 9:00 AM if not set
            const timeInput = document.getElementById('time');
            if (!timeInput.value) {
                timeInput.value = '09:00';
            }
        }

        // Renders the day filter buttons
        function renderDayFilters() {
            dayFilterContainer.innerHTML = '';
            DAYS_OF_WEEK.forEach(day => {
                const button = document.createElement('button');
                button.textContent = day;
                button.className = 'btn-day';
                if (day === selectedDay) {
                    button.classList.add('active');
                }
                button.onclick = () => {
                    selectedDay = day;
                    renderDayFilters(); // Re-render to update active state
                    renderSchedule();
                };
                dayFilterContainer.appendChild(button);
            });
            currentDaySubheader.textContent = `Viewing Schedule for: ${selectedDay}`;
        }

        // --- Data Logic ---

        function addClass(subject, teacher, day, time, location) {
            const classId = crypto.randomUUID();
            const newEntry = { id: classId, Subject: subject, Teacher: teacher, Day: day, Time: time, Location: location };
            schedule.push(newEntry);
            scheduleForm.reset(); // Clear form on submit
            formMessage.innerHTML = `<span style="color: green;">Class '${subject}' on ${day} added successfully! ‚úÖ</span>`;
            setTimeout(() => formMessage.textContent = '', 3000); // Clear message after 3 seconds
            renderSchedule();
            selectedDay = day; // Switch filter to the added day
            renderDayFilters();
        }

        function deleteClass(classId) {
            schedule = schedule.filter(cls => cls.id !== classId);
            renderSchedule();
        }

        function sortAndFilterSchedule() {
            // 1. Filter by selected day
            const filtered = schedule.filter(cls => cls.Day === selectedDay);

            // 2. Sort by time (Time property is a string 'HH:MM', which sorts correctly lexicographically)
            filtered.sort((a, b) => a.Time.localeCompare(b.Time));

            return filtered;
        }

        // --- Render Logic ---

        function renderSchedule() {
            const filteredSchedule = sortAndFilterSchedule();
            scheduleTableBody.innerHTML = ''; // Clear existing rows

            if (schedule.length === 0) {
                scheduleTableBody.innerHTML = `<div class="schedule-empty">Your entire schedule is currently empty. Add a class using the form on the left!</div>`;
                return;
            }

            if (filteredSchedule.length === 0) {
                scheduleTableBody.innerHTML = `<div class="schedule-empty">No classes scheduled for <b>${selectedDay}</b>. Add one using the form on the left!</div>`;
                return;
            }

            filteredSchedule.forEach(row => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'schedule-grid';
                
                rowDiv.innerHTML = `
                    <div>${row.Subject}</div>
                    <div>${row.Teacher}</div>
                    <div>${row.Time}</div>
                    <div>${row.Location}</div>
                    <div>
                        <button class="btn-delete" data-id="${row.id}">Delete</button>
                    </div>
                `;
                scheduleTableBody.appendChild(rowDiv);
            });

            // Attach event listeners to the new Delete buttons
            document.querySelectorAll('.btn-delete').forEach(button => {
                button.onclick = (e) => {
                    const classId = e.target.getAttribute('data-id');
                    deleteClass(classId);
                };
            });
        }

        // --- Event Listener for Form Submission ---
        scheduleForm.onsubmit = function(e) {
            e.preventDefault();
            
            const subject = document.getElementById('subject').value.trim();
            const teacher = document.getElementById('teacher').value.trim();
            const day = document.getElementById('day').value;
            const time = document.getElementById('time').value;
            const location = document.getElementById('location').value.trim();

            if (subject && teacher && day && time && location) {
                addClass(subject, teacher, day, time, location);
            } else {
                formMessage.textContent = 'Please fill in all fields.';
            }
        };

        // --- Run on Load ---
        initializeUI();

    </script>
</body>
</html>
